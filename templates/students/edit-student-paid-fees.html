{% extends 'base.html' %}
{% block content %}
{% load static %}

<div class="main-content pt-4" style="font-family: XW_Zar_Bd_0;">
    <div class="row">
        <div class="col-md-12">
            <ul class="nav nav-tabs justify-content-end mb-4" id="myTab" role="tablist">
            </ul>
            <div class="card">
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="invoice" role="tabpanel" aria-labelledby="invoice-tab">
                        <!-- ====== Edit Station Form ====== -->
                        <form method="POST" action="{% url 'students:edit_paid_fees' id=fess_id.id %}">
                            {% csrf_token %}
                            <div class="modal-dialog modal-lg">
                              <div class="modal-content p-3">
                                <div class="card-title h5 mb-3">اضافه کردن فیس</div>
                                <div>
                                  <div class="row">
                                    <div class="col-md-4 form-group mb-3">
                                      <label for="{{ form.date.id_for_label }}">تاریخ</label>
                                      {{ form.date }}
                                    </div>
                                    <div class="col-md-4 form-group mb-3">
                                      <label for="{{ form.orginal_fees.id_for_label }}">فیس اصلی</label>
                                      {{ form.orginal_fees }}
                                    </div>
                                    <div class="col-md-4 form-group mb-3 position-relative">
                                      <label for="{{ form.give_fees.id_for_label }}">مقدار فیس داده شده <span class="text-danger">*</span></label>
                                      {{ form.give_fees }}
                                      <div id="warning-msg" class="text-danger mt-1" style="display: none;">
                                        مقدار فیس داده شده نباید بزرگتر از مقدار اصلی فیس باشد!
                                      </div>
                                      <div id="overlay" style="
                                        display: none;
                                        position: absolute;
                                        top: 38px; /* adjust this if needed */
                                        left: 0;
                                        right: 0;
                                        height: 38px;
                                        background: rgba(255, 255, 255, 0.6);
                                        z-index: 10;
                                        pointer-events: none;
                                        border-radius: 4px;
                                      "></div>
                                    </div>
                                  </div>
                        
                                  <div class="col-md-12 form-group mb-3">
                                    <label for="{{ form.description.id_for_label }}">توضیحات</label>
                                    {{ form.description }}
                                  </div>
                        
                                  <div class="text-end">
                                    
                                    <!-- Dismiss button -->
                                <a href="{% url 'students:student_paid_fees' fess_id.student.id fess_id.st_class.id %}" class="btn btn-secondary mt-2" data-bs-dismiss="modal">
                                      برگشت
                                    </a>
                                  
                                    <!-- Submit button -->
                                    <button class="btn btn-primary mt-2" type="submit">
                                      ذخیره کردن
                                    </button>
                                  </div>
                                  
                                </div>
                              </div>
                            </div>
                          </form>
                               
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              const orginalFeesInput = document.getElementById('id_orginal_fees');
              const giveFeesInput = document.getElementById('id_give_fees');
              const warningMsg = document.getElementById('warning-msg');
              const overlay = document.getElementById('overlay');
          
              function validateFees() {
                const orginalValue = parseFloat(orginalFeesInput.value);
                const giveValue = parseFloat(giveFeesInput.value);
          
                if (!isNaN(orginalValue) && !isNaN(giveValue)) {
                  if (giveValue > orginalValue) {
                    warningMsg.style.display = 'block';
                    overlay.style.display = 'block';
                    giveFeesInput.style.borderColor = 'red';
                  } else {
                    warningMsg.style.display = 'none';
                    overlay.style.display = 'none';
                    giveFeesInput.style.borderColor = '';
                  }
                } else {
                  warningMsg.style.display = 'none';
                  overlay.style.display = 'none';
                  giveFeesInput.style.borderColor = '';
                }
              }
          
              orginalFeesInput.addEventListener('input', validateFees);
              giveFeesInput.addEventListener('input', validateFees);
            });
          </script>
          
        <script>
        document.addEventListener('DOMContentLoaded', function () {
          $('#datepicker3').datepicker({});
        });
        </script>
        
                        <!-- ====== / Edit Station Form ====== -->
                      </div>
                      
                </div>
            </div>
        </div>
    </div><!-- end of main-content -->
</div>

{% endblock %}