{% extends 'base.html'%}
{% load static %}
{% block content%}

<link href="{% static 'css/sweet.css' %}" rel="stylesheet">
<script src="{% static 'js/sweet.js' %}"></script>

<style>
    /* Main Dashboard Styles */
    :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --success-gradient: linear-gradient(135deg, #1cc88a 0%, #179b77 100%);
        --warning-gradient: linear-gradient(135deg, #f6c23e 0%, #dda20a 100%);
        --danger-gradient: linear-gradient(135deg, #e74a3b 0%, #be2617 100%);
        --info-gradient: linear-gradient(135deg, #36b9cc 0%, #258391 100%);
        --dark-gradient: linear-gradient(135deg, #5a5c69 0%, #3a3b45 100%);
    }
    
    .dashboard-header {
        background: var(--primary-gradient);
        color: white;
        border-radius: 0.75rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(102, 126, 234, 0.3);
    }
    
    .stat-card {
        border: none;
        border-radius: 0.75rem;
        overflow: hidden;
        transition: all 0.3s ease;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        height: 100%;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 2rem rgba(0, 0, 0, 0.2);
    }
    
    .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        margin-left: 1rem;
    }
    
    .stat-content {
        flex: 1;
    }
    
    /* Stat Card Colors */
    .stat-primary {
        border-left: 4px solid #4e73df;
        background: white;
    }
    
    .stat-success {
        border-left: 4px solid #1cc88a;
        background: white;
    }
    
    .stat-warning {
        border-left: 4px solid #f6c23e;
        background: white;
    }
    
    .stat-danger {
        border-left: 4px solid #e74a3b;
        background: white;
    }
    
    .stat-info {
        border-left: 4px solid #36b9cc;
        background: white;
    }
    
    .stat-dark {
        border-left: 4px solid #5a5c69;
        background: white;
    }
    
    /* Charts and Graphs */
    .chart-container {
        background: white;
        border-radius: 0.75rem;
        padding: 1.5rem;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        height: 100%;
    }
    
    .activity-card {
        background: white;
        border-radius: 0.75rem;
        padding: 1.5rem;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        height: 100%;
    }
    
    /* Activity Timeline */
    .activity-timeline {
        position: relative;
        padding-right: 2rem;
    }
    
    .activity-item {
        position: relative;
        padding-bottom: 1.5rem;
        padding-right: 2rem;
        border-right: 2px solid #e3e6f0;
    }
    
    .activity-item:last-child {
        border-right: none;
    }
    
    .activity-dot {
        position: absolute;
        right: -8px;
        top: 0;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 0 0 2px #4e73df;
    }
    
    .activity-dot.success {
        box-shadow: 0 0 0 2px #1cc88a;
    }
    
    .activity-dot.warning {
        box-shadow: 0 0 0 2px #f6c23e;
    }
    
    .activity-dot.danger {
        box-shadow: 0 0 0 2px #e74a3b;
    }
    
    /* Progress Bars */
    .progress-sm {
        height: 8px;
        border-radius: 4px;
    }
    
    /* Animation Classes */
    @keyframes pulse {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
        100% {
            transform: scale(1);
        }
    }
    
    @keyframes float {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }
    
    .pulse {
        animation: pulse 2s infinite;
    }
    
    .float {
        animation: float 3s ease-in-out infinite;
    }
    
    /* Recent Activity Badge */
    .recent-badge {
        position: absolute;
        top: -8px;
        left: -8px;
        background: #e74a3b;
        color: white;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        animation: pulse 1.5s infinite;
    }
    
    /* Quick Actions */
    .quick-action-btn {
        background: white;
        border: 1px solid #e3e6f0;
        border-radius: 0.5rem;
        padding: 1rem;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .quick-action-btn:hover {
        border-color: #4e73df;
        transform: translateY(-3px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        .dashboard-header {
            padding: 1.5rem;
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
        }
    }
</style>

<div style="font-family: 'Vazirmatn', sans-serif;">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="mb-2">{{ system_title }}</h1>
            </div>
            <div class="col-md-4 text-left">
                <div class="bg-white text-primary rounded-pill py-2 px-3 d-inline-block">
                    <i class="fas fa-chart-line ml-2"></i>
                    <span id="liveTime"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Cards Row 1 -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stat-card stat-primary">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(78, 115, 223, 0.1) 0%, rgba(78, 115, 223, 0.05) 100%); color: #4e73df;">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <div class="stat-content">
                            <div class="text-primary font-weight-bold">شاگردان جدید امروز</div>
                            <div class="h2 mb-0 font-weight-bold">۱۲</div>
                            <small class="text-muted">+۲ از دیروز</small>
                        </div>
                    </div>
                    <div class="progress progress-sm mt-3">
                        <div class="progress-bar bg-primary" style="width: 75%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stat-card stat-success">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(28, 200, 138, 0.1) 0%, rgba(28, 200, 138, 0.05) 100%); color: #1cc88a;">
                            <i class="fas fa-money-check-alt"></i>
                        </div>
                        <div class="stat-content">
                            <div class="text-success font-weight-bold">فیس‌های پرداخت شده</div>
                            <div class="h2 mb-0 font-weight-bold">۵۴,۰۰۰</div>
                            <small class="text-muted">افغانی</small>
                        </div>
                    </div>
                    <div class="progress progress-sm mt-3">
                        <div class="progress-bar bg-success" style="width: 85%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stat-card stat-warning">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(246, 194, 62, 0.1) 0%, rgba(246, 194, 62, 0.05) 100%); color: #f6c23e;">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="stat-content">
                            <div class="text-warning font-weight-bold">معاش پرداخت شده</div>
                            <div class="h2 mb-0 font-weight-bold">۲۳,۰۰۰</div>
                            <small class="text-muted">افغانی</small>
                        </div>
                    </div>
                    <div class="progress progress-sm mt-3">
                        <div class="progress-bar bg-warning" style="width: 60%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stat-card stat-danger">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(231, 74, 59, 0.1) 0%, rgba(231, 74, 59, 0.05) 100%); color: #e74a3b;">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <div class="text-danger font-weight-bold">سود خالص امروز</div>
                            <div class="h2 mb-0 font-weight-bold">۳۱,۰۰۰</div>
                            <small class="text-muted">افغانی</small>
                        </div>
                    </div>
                    <div class="progress progress-sm mt-3">
                        <div class="progress-bar bg-danger" style="width: 90%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Cards Row 2 -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stat-card stat-info">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(54, 185, 204, 0.1) 0%, rgba(54, 185, 204, 0.05) 100%); color: #36b9cc;">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="stat-content">
                            <div class="text-info font-weight-bold">کتاب‌های فروخته شده</div>
                            <div class="h2 mb-0 font-weight-bold">۸</div>
                            <small class="text-muted">امروز</small>
                        </div>
                    </div>
                    <div class="progress progress-sm mt-3">
                        <div class="progress-bar bg-info" style="width: 45%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stat-card stat-dark">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(90, 92, 105, 0.1) 0%, rgba(90, 92, 105, 0.05) 100%); color: #5a5c69;">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <div class="text-dark font-weight-bold">کل شاگردان فعال</div>
                            <div class="h2 mb-0 font-weight-bold">۱۵۶</div>
                            <small class="text-muted">در سیستم</small>
                        </div>
                    </div>
                    <div class="progress progress-sm mt-3">
                        <div class="progress-bar bg-dark" style="width: 78%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stat-card stat-primary pulse">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(78, 115, 223, 0.1) 0%, rgba(78, 115, 223, 0.05) 100%); color: #4e73df;">
                            <i class="fas fa-sign-in-alt"></i>
                        </div>
                        <div class="stat-content">
                            <div class="text-primary font-weight-bold">لاگین‌های امروز</div>
                            <div class="h2 mb-0 font-weight-bold">۹</div>
                            <small class="text-muted">کاربران سیستم</small>
                        </div>
                        <span class="recent-badge">۳</span>
                    </div>
                    <div class="progress progress-sm mt-3">
                        <div class="progress-bar bg-primary" style="width: 65%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stat-card stat-success float">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(28, 200, 138, 0.1) 0%, rgba(28, 200, 138, 0.05) 100%); color: #1cc88a;">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="stat-content">
                            <div class="text-success font-weight-bold">درصد پر بودن کلاس‌ها</div>
                            <div class="h2 mb-0 font-weight-bold">۸۷٪</div>
                            <small class="text-muted">میانگین پر بودن</small>
                        </div>
                    </div>
                    <div class="progress progress-sm mt-3">
                        <div class="progress-bar bg-success" style="width: 87%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts and Activity Section -->
    <div class="row mb-4">
        <!-- Income/Expense Chart -->
        <div class="col-xl-8 mb-4">
            <div class="chart-container">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5 class="font-weight-bold text-primary">
                        <i class="fas fa-chart-bar ml-2"></i>
                        نمودار درآمد و مصارف هفته
                    </h5>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-sm btn-outline-primary active">هفته</button>
                        <button type="button" class="btn btn-sm btn-outline-primary">ماه</button>
                        <button type="button" class="btn btn-sm btn-outline-primary">سال</button>
                    </div>
                </div>
                
                <!-- Simple Chart (Static) -->
                <div class="text-center py-5">
                    <div class="row align-items-end justify-content-center mb-4">
                        <div class="col-auto mx-2">
                            <div class="bg-primary rounded" style="width: 40px; height: 200px;"></div>
                            <div class="mt-2">شنبه</div>
                        </div>
                        <div class="col-auto mx-2">
                            <div class="bg-primary rounded" style="width: 40px; height: 180px;"></div>
                            <div class="mt-2">یکشنبه</div>
                        </div>
                        <div class="col-auto mx-2">
                            <div class="bg-primary rounded" style="width: 40px; height: 240px;"></div>
                            <div class="mt-2">دوشنبه</div>
                        </div>
                        <div class="col-auto mx-2">
                            <div class="bg-primary rounded" style="width: 40px; height: 220px;"></div>
                            <div class="mt-2">سه‌شنبه</div>
                        </div>
                        <div class="col-auto mx-2">
                            <div class="bg-primary rounded" style="width: 40px; height: 260px;"></div>
                            <div class="mt-2">چهارشنبه</div>
                        </div>
                        <div class="col-auto mx-2">
                            <div class="bg-primary rounded" style="width: 40px; height: 280px;"></div>
                            <div class="mt-2">پنجشنبه</div>
                        </div>
                        <div class="col-auto mx-2">
                            <div class="bg-success rounded" style="width: 40px; height: 320px;"></div>
                            <div class="mt-2">امروز</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center">
                        <div class="d-flex align-items-center mr-4">
                            <div class="bg-primary rounded mr-2" style="width: 20px; height: 20px;"></div>
                            <span>درآمد</span>
                        </div>
                        <div class="d-flex align-items-center">
                            <div class="bg-danger rounded mr-2" style="width: 20px; height: 20px;"></div>
                            <span>مصارف</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="col-xl-4 mb-4">
            <div class="activity-card">
                <h5 class="font-weight-bold text-primary mb-4">
                    <i class="fas fa-history ml-2"></i>
                    فعالیت‌های اخیر
                </h5>
                
                <div class="activity-timeline">
                    <div class="activity-item">
                        <div class="activity-dot success"></div>
                        <div class="mb-2">
                            <strong>محمد کریمی</strong> فیس پرداخت کرد
                            <small class="d-block text-muted">۲ دقیقه قبل - ۵,۰۰۰ افغانی</small>
                        </div>
                    </div>
                    
                    <div class="activity-item">
                        <div class="activity-dot"></div>
                        <div class="mb-2">
                            <strong>استاد احمدی</strong> معاش دریافت کرد
                            <small class="d-block text-muted">۱۵ دقیقه قبل - ۱۰,۰۰۰ افغانی</small>
                        </div>
                    </div>
                    
                    <div class="activity-item">
                        <div class="activity-dot warning"></div>
                        <div class="mb-2">
                            <strong>علی محمدی</strong> ثبت نام جدید
                            <small class="d-block text-muted">۱ ساعت قبل - کلاس انگلیسی</small>
                        </div>
                    </div>
                    
                    <div class="activity-item">
                        <div class="activity-dot danger"></div>
                        <div class="mb-2">
                            <strong>زهرا حسینی</strong> کتاب خریداری کرد
                            <small class="d-block text-muted">۲ ساعت قبل - کتاب Basic 1</small>
                        </div>
                    </div>
                    
                    <div class="activity-item">
                        <div class="activity-dot"></div>
                        <div class="mb-2">
                            <strong>مدیر سیستم</strong> وارد سیستم شد
                            <small class="d-block text-muted">۳ ساعت قبل</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions and System Status -->
    <div class="row">
        <!-- Quick Actions -->
        <div class="col-xl-6 mb-4">
            <div class="chart-container">
                <h5 class="font-weight-bold text-primary mb-4">
                    <i class="fas fa-bolt ml-2"></i>
                    اقدامات سریع
                </h5>
                
                <div class="row">
                    <div class="col-md-3 col-6 mb-3">
                        <a href="#" class="quick-action-btn text-decoration-none">
                            <div class="text-primary mb-2">
                                <i class="fas fa-user-plus fa-2x"></i>
                            </div>
                            <small class="text-dark">ثبت شاگرد جدید</small>
                        </a>
                    </div>
                    
                    <div class="col-md-3 col-6 mb-3">
                        <a href="#" class="quick-action-btn text-decoration-none">
                            <div class="text-success mb-2">
                                <i class="fas fa-money-bill-wave fa-2x"></i>
                            </div>
                            <small class="text-dark">پرداخت فیس</small>
                        </a>
                    </div>
                    
                    <div class="col-md-3 col-6 mb-3">
                        <a href="#" class="quick-action-btn text-decoration-none">
                            <div class="text-warning mb-2">
                                <i class="fas fa-user-tie fa-2x"></i>
                            </div>
                            <small class="text-dark">پرداخت معاش</small>
                        </a>
                    </div>
                    
                    <div class="col-md-3 col-6 mb-3">
                        <a href="#" class="quick-action-btn text-decoration-none">
                            <div class="text-info mb-2">
                                <i class="fas fa-book fa-2x"></i>
                            </div>
                            <small class="text-dark">فروش کتاب</small>
                        </a>
                    </div>
                    
                    <div class="col-md-3 col-6 mb-3">
                        <a href="#" class="quick-action-btn text-decoration-none">
                            <div class="text-danger mb-2">
                                <i class="fas fa-chart-line fa-2x"></i>
                            </div>
                            <small class="text-dark">گزارش مالی</small>
                        </a>
                    </div>
                    
                    <div class="col-md-3 col-6 mb-3">
                        <a href="#" class="quick-action-btn text-decoration-none">
                            <div class="text-dark mb-2">
                                <i class="fas fa-cogs fa-2x"></i>
                            </div>
                            <small class="text-dark">تنظیمات</small>
                        </a>
                    </div>
                    
                    <div class="col-md-3 col-6 mb-3">
                        <a href="#" class="quick-action-btn text-decoration-none">
                            <div class="text-primary mb-2">
                                <i class="fas fa-print fa-2x"></i>
                            </div>
                            <small class="text-dark">پرینت گزارش</small>
                        </a>
                    </div>
                    
                    <div class="col-md-3 col-6 mb-3">
                        <a href="#" class="quick-action-btn text-decoration-none">
                            <div class="text-success mb-2">
                                <i class="fas fa-download fa-2x"></i>
                            </div>
                            <small class="text-dark">اکسل خروجی</small>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Status -->
        <div class="col-xl-6 mb-4">
            <div class="activity-card">
                <h5 class="font-weight-bold text-primary mb-4">
                    <i class="fas fa-server ml-2"></i>
                    وضعیت سیستم
                </h5>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center mb-2">
                            <div class="bg-success rounded-circle mr-2" style="width: 10px; height: 10px;"></div>
                            <span>پایگاه داده</span>
                        </div>
                        <div class="progress progress-sm">
                            <div class="progress-bar bg-success" style="width: 95%"></div>
                        </div>
                        <small class="text-muted">۹۵٪ - سالم</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center mb-2">
                            <div class="bg-success rounded-circle mr-2" style="width: 10px; height: 10px;"></div>
                            <span>فضای ذخیره‌سازی</span>
                        </div>
                        <div class="progress progress-sm">
                            <div class="progress-bar bg-success" style="width: 65%"></div>
                        </div>
                        <small class="text-muted">۶۵٪ - ۱۳GB از ۲۰GB</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center mb-2">
                            <div class="bg-warning rounded-circle mr-2" style="width: 10px; height: 10px;"></div>
                            <span>ترافیک امروز</span>
                        </div>
                        <div class="progress progress-sm">
                            <div class="progress-bar bg-warning" style="width: 78%"></div>
                        </div>
                        <small class="text-muted">۷۸٪ - ۲.۴GB</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center mb-2">
                            <div class="bg-danger rounded-circle mr-2 pulse" style="width: 10px; height: 10px;"></div>
                            <span>کاربران آنلاین</span>
                        </div>
                        <div class="progress progress-sm">
                            <div class="progress-bar bg-danger" style="width: 30%"></div>
                        </div>
                        <small class="text-muted">۳ کاربر آنلاین</small>
                    </div>
                </div>
                
                <div class="mt-4 pt-3 border-top">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-0">آخرین به‌روزرسانی</h6>
                            <small class="text-muted">۲ ساعت قبل</small>
                        </div>
                        <div class="badge badge-success">به روز</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Update live time
    function updateLiveTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('fa-IR');
        document.getElementById('liveTime').textContent = timeString;
    }
    
    // Update time every second
    setInterval(updateLiveTime, 1000);
    updateLiveTime(); // Initial call
    
    // Add hover effects to stat cards
    document.addEventListener('DOMContentLoaded', function() {
        // Add pulse animation to login card every 10 seconds
        setInterval(function() {
            const loginCard = document.querySelector('.stat-card.stat-primary.pulse');
            if (loginCard) {
                loginCard.classList.remove('pulse');
                void loginCard.offsetWidth; // Trigger reflow
                loginCard.classList.add('pulse');
            }
        }, 10000);
        
        // Add random number animations to stat cards
        const statCards = document.querySelectorAll('.stat-card');
        statCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                const numbers = this.querySelectorAll('.h2');
                numbers.forEach(number => {
                    const original = number.textContent;
                    if (!isNaN(original.replace(/[^0-9]/g, ''))) {
                        // Add a small random fluctuation for visual effect
                        const originalNum = parseInt(original.replace(/[^0-9]/g, ''));
                        const random = Math.floor(Math.random() * 5) + 1;
                        const newNum = originalNum + random;
                        number.textContent = newNum.toLocaleString('fa-IR');
                        
                        // Restore original after leaving
                        setTimeout(() => {
                            number.textContent = original;
                        }, 500);
                    }
                });
            });
        });
        
        // Add click effect to quick action buttons
        const quickActions = document.querySelectorAll('.quick-action-btn');
        quickActions.forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const icon = this.querySelector('i');
                icon.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    icon.style.transform = 'scale(1)';
                }, 300);
                
                // Show loading effect
                this.style.opacity = '0.7';
                setTimeout(() => {
                    this.style.opacity = '1';
                }, 300);
            });
        });
    });
</script>

{% endblock %}